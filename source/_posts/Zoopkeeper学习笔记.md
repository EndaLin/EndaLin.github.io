---
title: Zoopkeeper学习笔记
copyright: true
date: 2019-10-02 20:31:28
tags: Zoopkeeper
---

# Zoopkeeper 工作机制

Zoopkeeper 是一个给予观察者模式设计的分布式服务管理框架，它负责存储和管理大家都关心的数据，接受观察者的注册，一旦数据状态发生了变化，Zoopkeeper 就负责通知已经在Zoopkeeper 上注册的那些观察者做出相应的反应。

Zoopeeker = 文件系统 + 通知机制

# Zoopkeeper 特点
- Zoopkeeper集群，一个leader, 多个跟随着组成集群
- 只要集群中半数以上节点存货，Zoopeekper 集群就能存活
- 全局数据的一致性，集群中每一个节点的数据都是一致的
- 集群对更新请求是顺序执行的，来自同一个client 的更新请求是按其发送顺序来顺序执行的
- 数据更新的原子性：一次数据要么更新成功，要么更新失败
- 实时性：在一定时间内，Client 总能读取到最新的数据

<!--more-->

# Zoopkeeper 应用场景

## 统一命名服务
在分布式环境下，需要对服务或者命名进行统一命名操作，同一个命名下，会有多个不同IP 的服务器统一对外提供相同的服务。

## 统一配置服务
- 在分布式环境下，统一集群中的配置文件，如kafka 集群
- 对配置文件修改后，能够迅速同步到各个节点上，此处，配置管理可以交给Zookeeper 上的一个Znode，各个客户端服务器监听这个Znode，一旦Znode 的数据发生了变化，Zookeeper 会通知所有节点

## 统一集群管理
- 在分布式环境中，Zoopkeeper 可以实时监控每一个节点的状态变化，节点信息可以存储在Zoopkeeper 中的一个ZNode 中
- 客户端能实时洞察到服务器上下线的状态变化

## 软负载均衡
在Zoopkeeper 中记录每台服务器的访问数，让访问数最少的服务器去处理最新的客户端请求
